(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var o=t.g.document;if(!e&&o&&(o.currentScript&&"SCRIPT"===o.currentScript.tagName.toUpperCase()&&(e=o.currentScript.src),!e)){var n=o.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e="https://geocode-maps.yandex.ru/1.x/?apikey=574e6d3d-c124-49e6-9dd6-8d232e5ba152&lang=ru_RU&kind=locality&results=1&format=json&",o=async({geo:t,coordinates:o})=>{try{const n=await fetch(o?`${e}geocode=${t}`:`${e}uri=${t}`);if(403===n.status)throw new Error("Запрос не содержит параметр apikey или указан неверный ключ.");if(400===n.status)throw new Error("В запросе отсутствует обязательный параметр или указано неверное значение параметра. Сообщение содержит дополнительную информацию об ошибке.");if(429===n.status)throw new Error("Слишком много запросов за короткое время.");return n.json()}catch(t){throw new Error(t)}},n=document.querySelector(".weather__deg"),r=document.querySelector(".weather__icon"),a=()=>{(async({latitude:t,longitude:e})=>{try{const o=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&lang=ru&units=metric&appid=4a55c9ca2fc1ffcf9a47f22d824344a2`);if(400===o.status)throw new Error("В запросе отсутствуют обязательные параметры, либо некоторые параметры запроса имеют неверный формат или значения выходят за пределы допустимого диапазона.");if(401===o.status)throw new Error("Токен API отсутствует или указан неверный.");if(404===o.status)throw new Error("Данные с запрошенными параметрами не существуют в базе данных сервиса. Не повторяйте этот запрос.");if(429===o.status)throw new Error("Слишком много запросов.");return o.json()}catch(t){throw new Error(t)}})({latitude:localStorage.getItem("lat"),longitude:localStorage.getItem("long")}).then((t=>{r.style.backgroundImage=`url('https://openweathermap.org/img/wn/${t.weather[0].icon}.png')`,n.textContent=Math.round(t.main.temp)+" °C"}))},s=document.querySelector(".weather__input"),c=document.querySelector(".weather__items"),i=document.getElementById("date"),l=document.getElementById("time"),d=document.querySelector(".modal"),u=document.querySelector(".modal__title"),g=document.querySelector(".weather__input");function m(t){if(!localStorage.getItem("long")){const{longitude:e,latitude:o}=t.coords;localStorage.setItem("long",e),localStorage.setItem("lat",o)}const e=`${localStorage.getItem("long")},${localStorage.getItem("lat")}`;o({geo:e,coordinates:!0}).then((t=>{g.value=t.response.GeoObjectCollection.featureMember[0].GeoObject.name})).catch((t=>{console.error(t.message)})),a()}function h(){u.innerHTML="Не получается определить вашу геолокацию :(",d.classList.remove("hide"),p(),o({geo:"38.90478515625,45.07389068603516",coordinates:!0}).then((t=>{g.value=t.response.GeoObjectCollection.featureMember[0].GeoObject.name})).catch((t=>{console.error(t.message)}))}function p(){document.querySelector(".modal__btn").addEventListener("click",(()=>{d.classList.add("hide")}))}const w=t.p+"img/20281eaf7f3981226ac7.jpg",f=t.p+"img/508d0e5e4d7b6dad287b.jpg",S=t.p+"img/9bf9f9292a6b99df332a.jpg",y=t.p+"img/721bd82379d81ac683dc.jpg",b=document.querySelector(".container"),v=document.getElementById("input-todo"),L=document.querySelector(".todo__items"),_=(document.querySelector(".todo"),document.querySelector(".todo__delete")),E=()=>{const t=JSON.parse(localStorage.getItem("todo"));if(t&&0!==t.length){const e=t.map((t=>`\n            <div class="todo__item">\n                <label for="${t.id}" ${t.done&&'class="done"'}>\n                <input type="checkbox" name="${t.id}" id="${t.id}" ${t.done&&"checked"}/>\n                   ${t.name}\n                </label>\n                <button type="button" class="todo__btn" data-todo="${t.id}">\n                    <svg\n                        class="todo__icon"\n                        version="1.1"\n                        id="Capa_1"\n                        xmlns="http://www.w3.org/2000/svg"\n                        xmlns:xlink="http://www.w3.org/1999/xlink"\n                        x="0px"\n                        y="0px"\n                        viewBox="0 0 480 480"\n                        style="enable-background: new 0 0 480 480"\n                        xml:space="preserve"\n                    >\n                        <g>\n                        <g>\n                            <g>\n                            <path\n                                d="M424,32H300.944L287.2,4.424C285.838,1.699,283.047-0.017,280,0h-80c-3.032-0.001-5.805,1.712-7.16,4.424L179.056,32H56 c-4.418,0-8,3.582-8,8v48c0,4.418,3.582,8,8,8h16.936l47.128,376.992c0.5,4.003,3.902,7.007,7.936,7.008h224 c4.034-0.001,7.436-3.005,7.936-7.008L407.064,96H424c4.418,0,8-3.582,8-8V40C432,35.582,428.418,32,424,32z M204.944,16h70.112 l8,16h-86.112L204.944,16z M344.944,464h-209.88l-46-368h301.872L344.944,464z M416,80H64V48h352V80z"\n                            />\n                            <path\n                                d="M176.56,408.992c0.5,4.003,3.902,7.007,7.936,7.008c0.334-0.002,0.668-0.023,1-0.064 c4.382-0.549,7.491-4.545,6.944-8.928l-32-256c-0.548-4.385-4.547-7.496-8.932-6.948s-7.496,4.547-6.948,8.932L176.56,408.992z"\n                            />\n                            <path\n                                d="M294.504,415.936c0.332,0.041,0.666,0.062,1,0.064c4.034-0.001,7.436-3.005,7.936-7.008l32-256 c0.548-4.385-2.563-8.384-6.948-8.932s-8.384,2.563-8.932,6.948l-32,256C287.013,411.391,290.122,415.387,294.504,415.936z"\n                            />\n                            <path\n                                d="M240,416c4.418,0,8-3.582,8-8V152c0-4.418-3.582-8-8-8s-8,3.582-8,8v256C232,412.418,235.582,416,240,416z"\n                            />\n                            </g>\n                        </g>\n                        </g>\n                    </svg>\n                    </button>\n          </div>\n            `)).join("");L.innerHTML=e,document.querySelectorAll(".todo__item label").forEach((t=>{t.addEventListener("change",(e=>{e.preventDefault(),e.target.checked?(t.classList.add("zoomIn"),t.classList.remove("zoomOut"),t.classList.add("done")):(t.classList.add("zoomOut"),t.classList.remove("zoomIn"),t.classList.remove("done"));const o=JSON.parse(localStorage.getItem("todo")).map((t=>(t.id.toString()===e.target.id&&(t.done=!t.done),t)));localStorage.setItem("todo",JSON.stringify(o))}))})),document.querySelectorAll(".todo__item button").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();const o=JSON.parse(localStorage.getItem("todo")).filter((e=>e.id.toString()!==t.getAttribute("data-todo")));localStorage.setItem("todo",JSON.stringify(o)),E()}))})),t.some((t=>!0===t.done))?(_.style.display="block",_.addEventListener("click",(()=>{const t=JSON.parse(localStorage.getItem("todo")).filter((t=>!1===t.done));localStorage.setItem("todo",JSON.stringify(t)),E()}))):_.style.display="none"}else _.style.display="none",L.innerHTML=""};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=(new Date).getHours();b.style.backgroundImage=t>=0&&t<6?`url('${w}')`:t>=6&&t<12?`url('${f}')`:t>=12&&t<18?`url('${S}')`:`url('${y}')`})(),(()=>{let t=setTimeout((function e(){l.textContent=(new Date).toLocaleTimeString(),l.setAttribute("datetime",(new Date).toLocaleTimeString()),l.textContent,t=setTimeout(e,1e3)}),0);(()=>{const t=(new Date).toLocaleDateString("ru",{month:"long",day:"numeric"}),e=(new Date).toLocaleDateString("ru",{weekday:"long"}),o=(new Date).toISOString().slice(0,10);i.textContent=`${t}, ${e}`,i.setAttribute("datetime",o),i.textContent})()})(),E(),v.addEventListener("keydown",(t=>{if("Enter"===t.code)if(""===v.value)v.classList.add("error"),v.setAttribute("placeholder","Введите текст"),v.classList.toggle("shake");else{v.classList.remove("error"),v.setAttribute("placeholder","Новая задача"),v.classList.remove("shake");const t=JSON.parse(localStorage.getItem("todo"))||[],e={id:Date.now().toString(6)-Math.random().toString(6).slice(2,0),name:v.value.trim(),done:!1};t.push(e),localStorage.setItem("todo",JSON.stringify(t)),E(),v.value=""}}))})),window.addEventListener("load",(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(m,h):(u.innerHTML="Геолокация не поддерживается",d.classList.remove("hide"),p()),s.addEventListener("input",(t=>{""===t.target.value&&c.classList.add("hide"),t.target.value&&(async({text:t})=>{try{const e=await fetch(`https://suggest-maps.yandex.ru/v1/suggest?apikey=2f2699a0-4a4e-441f-9ac8-09a05fa89c49&lang=ru&types=locality&strict_bounds=1&attrs=uri&text=${t}&results=5`);if(403===e.status)throw new Error("Запрос не содержит параметр apikey или указан неверный ключ.");if(400===e.status)throw new Error("В запросе отсутствует обязательный параметр или указано неверное значение параметра.");if(429===e.status)throw new Error("Слишком много запросов за короткое время.");return e.json()}catch(t){throw new Error(t)}})({text:t.target.value}).then((t=>{t.results?function(t){c.classList.remove("hide");const e=t.map((t=>`<p class="weather__item" data-uri=${t.uri}>${t.title.text} ${t.subtitle?`,  ${t.subtitle.text}`:""}</p>`)).join("");c.innerHTML=e,document.querySelectorAll(".weather__item").forEach((t=>{t.addEventListener("click",(e=>{const n=e.target.textContent,r=n.indexOf(",");s.value=-1===r?n:n.substring(0,r),c.classList.add("hide"),o({geo:t.getAttribute("data-uri"),coordinates:!1}).then((t=>{let e=t.response.GeoObjectCollection.featureMember[0].GeoObject.Point.pos.split(" ");localStorage.setItem("long",e[0]),localStorage.setItem("lat",e[1])})).then((()=>{a()}))}))}))}(t.results):c.innerHTML="Ничего не найдено"}))}))}))})();